// Copyright 2021 Eric Lawrey - Australian Institute of Marine Science
//
// MIT License https://mit-license.org/
// This script is written to run on the Google Earth Engine. 

// === README: Change the path to your local copy of the utils code ====
// The path to the util code must be an absolute path including the
// username and repository
var utils = require('users/ericlawrey/CS_AIMS_Sentinel2-marine_V0:utils');

// These are the options for the primary reference imagery.
// The primary reference imagery should correspond to a composite
// made from the best set of images available, with the goal being
// to get the cleanest image.

var REF1_OPTIONS = {
  colourGrades: ['TrueColour','DeepMarine','ReefTop','Shallow','DeepFalse'],
  exportBasename: 'CS_AIMS_Sentinel2-marine_V0_R1',
  exportFolder: 'EarthEngine/CS_AIMS_Sentinel2-marine_V0',
  scale: 10
};

// These options correspond to the secondary reference imagery.
// This will be made from the next best set of images. The goal
// is to provide a second set of imagery to determine if spots
// in the imagery are artefacts (from clouds) or real features.
var REF2_OPTIONS = {
  colourGrades: ['DeepFalse','DeepMarine'],
  exportBasename: 'CS_AIMS_Sentinel2-marine_V0_R2',
  exportFolder: 'EarthEngine/CS_AIMS_Sentinel2-marine_V0',
  scale: 10
};

// ===============================================================
//                      GENERAL OVERVIEW
// ===============================================================
// Each Sentinel 2 tile is processed using the utils.s2_composite_display_and_export
// function. 
// utils.s2_composite_display_and_export(imageIds, isDisplay, isExport, styleOptions)
// It takes a list of image IDs to combine, along with
// whether to display the composite, whether to export the composite
// and what styles to generate.
// By default each tile has isDisplay and isExport set to false
// so that the script doesn't generate an overwhelming Number
// of display layers and export tasks. Generally individual or
// groups of tiles are worked on at one time. When they are complete
// the isDisplay and isExport are set to false to indicate that they
// have been processed.
// All tiles in this script have already been processed and thus their
// isDisplay and isExport variables are set to false. To reprocess
// one or more of the tiles change these settings.
//
// GOTCHA 1: This script does not zoom to the location of the 
// displayed composite images. You therefore need to know where
// it is on the map and to manually pan there.
// GOTCHA 2: Setting the isDisplay variable to true indicates that
// the map layer for the composite should be created, but it isn't
// enabled by default. Use the map UI to enable the layer. This 
// behaviour was done so that if you enabled lots of layers to be
// display then it would not immediately attempt to render all of them.

// ===============================================================
//
//                      CORAL SEA
//
// ===============================================================

// ==== Boot Reef, Portlock Reefs (Coral Sea) - Far North ===
// CLOUD_PIXEL_PERCENTAGE 1%
// There were not sufficient good images to create a second
// reference image.
// 19 of 19 images
utils.s2_composite_display_and_export(
  [
    // Maybe
		"COPERNICUS/S2/20190115T004709_20190115T004705_T55LBK",
		"COPERNICUS/S2/20190510T004711_20190510T004710_T55LBK",
		"COPERNICUS/S2/20190907T004711_20190907T004705_T55LBK",
		"COPERNICUS/S2/20200613T004711_20200613T004712_T55LBK",
		"COPERNICUS/S2/20200822T004711_20200822T004712_T55LBK",
		"COPERNICUS/S2/20210802T004709_20210802T004707_T55LBK"
  ],
  true, false, REF1_OPTIONS);

  
// ======== Ashmore Reef (Coral Sea) - Far North =========
// Good images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20180813T004711_20180813T004705_T54LZP",
		"COPERNICUS/S2/20200822T004711_20200822T004712_T54LZP",
		"COPERNICUS/S2/20210603T004709_20210603T004707_T54LZP"
  ],
  false, false, REF1_OPTIONS);

// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20210723T004709_20210723T004708_T54LZP",
		"COPERNICUS/S2/20200414T004711_20200414T004705_T54LZP"
  ],
  false, false, REF2_OPTIONS);
  
// Maybe images
//COPERNICUS/S2/20160505T004712_20160505T004711_T54LZP
//COPERNICUS/S2/20160823T004902_20160823T021200_T54LZP
//COPERNICUS/S2/20170823T004659_20170823T004702_T54LZP
//COPERNICUS/S2/20200613T004711_20200613T004712_T54LZP
  
  
// ======== Osprey Reef (Coral Sea) - North =========
// Searched 40 out of 65
// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20161215T003032_20161215T003028_T55LDE",
		"COPERNICUS/S2/20170713T002711_20170713T002708_T55LDE",
		"COPERNICUS/S2/20181016T002701_20181016T002704_T55LDE",
		"COPERNICUS/S2/20181115T002701_20181115T002702_T55LDE"
  ],
  false, false, REF1_OPTIONS);


// Maybe images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160529T003042_20160529T003038_T55LDE",
		"COPERNICUS/S2/20160608T002733_20160608T033407_T55LDE",
		"COPERNICUS/S2/20170124T003031_20170124T003025_T55LDE",
		"COPERNICUS/S2/20171205T002659_20171205T002656_T55LDE",
		"COPERNICUS/S2/20171230T003031_20171230T003026_T55LDE",
		"COPERNICUS/S2/20180213T002659_20180213T002700_T55LDE",
		"COPERNICUS/S2/20181011T002709_20181011T002703_T55LDE",
		"COPERNICUS/S2/20181016T002701_20181016T002704_T55LDE",
		"COPERNICUS/S2/20181105T002701_20181105T002703_T55LDE",
  ],
  false, false, REF2_OPTIONS);



// ======== Bougainville Reef (Coral Sea) =========
// Searched 30 out of 43 images
// 3 Good and 2 OK
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20180812T002659_20180812T002702_T55LEC",
		"COPERNICUS/S2/20180822T002659_20180822T002700_T55LEC",
		"COPERNICUS/S2/20190906T002709_20190906T002709_T55LEC",
		"COPERNICUS/S2/20160419T003034_20160419T015417_T55LEC",
		"COPERNICUS/S2/20170613T003031_20170613T003033_T55LEC"
  ],
  false, false, REF1_OPTIONS);


// Maybe images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170827T003029_20170827T003028_T55LEC",
		"COPERNICUS/S2/20180213T002659_20180213T002700_T55LEC",
		"COPERNICUS/S2/20180713T002709_20180713T002923_T55LEC",
		"COPERNICUS/S2/20190613T002711_20190613T002710_T55LEC",
		"COPERNICUS/S2/20190827T002709_20190827T002712_T55LEC",
		"COPERNICUS/S2/20200304T002709_20200304T002705_T55LEC",
  ],
  false, false, REF2_OPTIONS);



// ======== Diane Bank (Coral Sea) - Central =========
// Searched 30 out of 62 images
// 2 Good, 4 OK
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160903T002102_20160903T032316_T55LGC",
		"COPERNICUS/S2/20170720T002111_20170720T002106_T55LGC",
		"COPERNICUS/S2/20170730T002111_20170730T002107_T55LGC",
		"COPERNICUS/S2/20170928T002051_20170928T002051_T55LGC",
		"COPERNICUS/S2/20180111T002049_20180111T002046_T55LGC",
		"COPERNICUS/S2/20180829T002049_20180829T002045_T55LGC"
  ],
  false, false, REF1_OPTIONS);


// Maybe images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160605T002112_20160605T002110_T55LGC",
		"COPERNICUS/S2/20170715T002109_20170715T002105_T55LGC",
		"COPERNICUS/S2/20170814T002109_20170814T002103_T55LGC",
		"COPERNICUS/S2/20170824T002059_20170824T002101_T55LGC",
		"COPERNICUS/S2/20180426T002101_20180426T002056_T55LGC",
		"COPERNICUS/S2/20180720T002049_20180720T002052_T55LGC",
		"COPERNICUS/S2/20180730T002049_20180730T002051_T55LGC",
		"COPERNICUS/S2/20180814T002051_20180814T002054_T55LGC",
		"COPERNICUS/S2/20180928T002049_20180928T002048_T55LGC"
  ],
  false, false, REF2_OPTIONS);



// ======== Willis Islets (Coral Sea) =========
// Searched 40 out of 63 images
// 2 Good and 4 OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170720T002111_20170720T002106_T55LHC",
		"COPERNICUS/S2/20200405T002051_20200405T002051_T55LHC",
		"COPERNICUS/S2/20180819T002049_20180819T002047_T55LHC",
		"COPERNICUS/S2/20180928T002049_20180928T002048_T55LHC",
		"COPERNICUS/S2/20190416T002059_20190416T002100_T55LHC",
		"COPERNICUS/S2/20190720T002101_20190720T002100_T55LHC"
  ],
  false, false, REF1_OPTIONS);


// Maybe images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160903T002102_20160903T032316_T55LHC",
		"COPERNICUS/S2/20180302T002049_20180302T002045_T55LHC",
		"COPERNICUS/S2/20170913T002059_20170913T002056_T55LHC",
		"COPERNICUS/S2/20180605T002101_20180605T002055_T55LHC",
		"COPERNICUS/S2/20180725T002101_20180725T002055_T55LHC",
		"COPERNICUS/S2/20180730T002049_20180730T002051_T55LHC",
		"COPERNICUS/S2/20200410T002049_20200410T002051_T55LHC",
		"COPERNICUS/S2/20200729T002059_20200729T002057_T55LHC"
  ],
  false, false, REF2_OPTIONS);



// ======== Holmes Reefs (West), Flora Reef, McDermott Bank (Coral Sea) =========
// Searched 35 out of 56 images
// 1 Excellent, 3 Good images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20180812T002659_20180812T002702_T55KEB",
		"COPERNICUS/S2/20160608T002733_20160608T033407_T55KEB",
		"COPERNICUS/S2/20180728T002711_20180728T002708_T55KEB",
		"COPERNICUS/S2/20190703T002711_20190703T002712_T55KEB"
  ],
  false, false, REF1_OPTIONS);


// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170514T002711_20170514T002710_T55KEB",
		"COPERNICUS/S2/20170708T002709_20170708T003116_T55KEB",
		"COPERNICUS/S2/20180713T002709_20180713T002923_T55KEB",
		"COPERNICUS/S2/20190618T002719_20190618T002715_T55KEB"
  ],
  false, false, REF2_OPTIONS);
// Maybe
// COPERNICUS/S2/20160509T003042_20160509T003038_T55KEB
// COPERNICUS/S2/20160916T002702_20160916T033357_T55KEB
// COPERNICUS/S2/20160926T003032_20160926T015230_T55KEB
// COPERNICUS/S2/20161006T002702_20161006T033359_T55KEB
// COPERNICUS/S2/20180213T002659_20180213T002700_T55KEB
// COPERNICUS/S2/20180419T002711_20180419T002709_T55KEB
// COPERNICUS/S2/20180802T002709_20180802T002704_T55KEB


// ======== Holmes Reefs (East) (Coral Sea) =========
// Searched 70 out of 116 images
// 2 Excellent right, 2 Good right images, 5 OK left images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20180426T002101_20180426T002056_T55KFB",
		"COPERNICUS/S2/20190918T002051_20190918T002054_T55KFB",
		"COPERNICUS/S2/20180829T002049_20180829T002045_T55KFB",
		"COPERNICUS/S2/20180908T002049_20180908T002045_T55KFB",
		"COPERNICUS/S2/20170514T002711_20170514T002710_T55KFB",
		"COPERNICUS/S2/20180419T002711_20180419T002709_T55KFB",
		"COPERNICUS/S2/20190812T002711_20190812T002711_T55KFB",
		"COPERNICUS/S2/20190827T002709_20190827T002712_T55KFB",
		"COPERNICUS/S2/20190926T002709_20190926T002707_T55KFB"
  ],
  false, false, REF1_OPTIONS);


// 6 OK right images, 5 Maybe left images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160605T002112_20160605T002110_T55KFB",
		"COPERNICUS/S2/20170220T002101_20170220T002059_T55KFB",
		"COPERNICUS/S2/20170720T002111_20170720T002106_T55KFB",
		"COPERNICUS/S2/20180730T002049_20180730T002051_T55KFB",
		"COPERNICUS/S2/20190220T001631_20190220T001625_T55KFB",
		"COPERNICUS/S2/20190903T002059_20190903T002057_T55KFB",
		"COPERNICUS/S2/20160916T002702_20160916T033357_T55KFB",
		"COPERNICUS/S2/20160926T003032_20160926T015230_T55KFB",
		"COPERNICUS/S2/20170906T002659_20170906T002700_T55KFB",
		"COPERNICUS/S2/20180802T002709_20180802T002704_T55KFB",
		"COPERNICUS/S2/20190718T002719_20190718T002716_T55KFB"
  ],
  false, false, REF2_OPTIONS);




// ======== Herald Cays, Willis Islets, Magdelaine Cays (West) (Coral Sea) =========
// Searched 40 out of 68 images
// 3 Excellent images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170720T002111_20170720T002106_T55KGB",
		"COPERNICUS/S2/20180426T002101_20180426T002056_T55KGB",
		"COPERNICUS/S2/20180829T002049_20180829T002045_T55KGB"
  ],
  false, false, REF1_OPTIONS);


// 2 Good and 3 OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170715T002109_20170715T002105_T55KGB",
		"COPERNICUS/S2/20190401T002101_20190401T002055_T55KGB",
		"COPERNICUS/S2/20170814T002109_20170814T002103_T55KGB",
		"COPERNICUS/S2/20180220T002049_20180220T002046_T55KGB",
		"COPERNICUS/S2/20190220T001631_20190220T001625_T55KGB"
  ],
  false, false, REF2_OPTIONS);

// Maybe
// COPERNICUS/S2/20160605T002112_20160605T002110_T55KGB
// COPERNICUS/S2/20160625T002112_20160625T002106_T55KGB
// COPERNICUS/S2/20160913T002102_20160913T014402_T55KGB
// COPERNICUS/S2/20170824T002059_20170824T002101_T55KGB
// COPERNICUS/S2/20170923T002009_20170923T002012_T55KGB		
// COPERNICUS/S2/20180215T002051_20180215T002102_T55KGB
// COPERNICUS/S2/20180421T002059_20180421T002053_T55KGB
// COPERNICUS/S2/20180720T002049_20180720T002052_T55KGB
// COPERNICUS/S2/20180730T002049_20180730T002051_T55KGB
// COPERNICUS/S2/20180908T002049_20180908T002045_T55KGB
// COPERNICUS/S2/20190312T002051_20190312T002050_T55KGB


// ======== Magdelaine Cays, Coringa Islet (East), U/N reef (Coral Sea) =========
// Searched 40 out of 63 images
// Good images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160605T002110_20160605T014413_T55KHB",
		"COPERNICUS/S2/20170814T002109_20170814T002103_T55KHB",
		"COPERNICUS/S2/20180426T002101_20180426T002056_T55KHB",
		"COPERNICUS/S2/20180829T002049_20180829T002045_T55KHB"
  ],
  false, false, REF1_OPTIONS);


// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160516T002112_20160516T002111_T55KHB",
		"COPERNICUS/S2/20170715T002109_20170715T002105_T55KHB",
		"COPERNICUS/S2/20170720T002111_20170720T002106_T55KHB",
		"COPERNICUS/S2/20180908T002049_20180908T002045_T55KHB",
		"COPERNICUS/S2/20190720T002101_20190720T002100_T55KHB",
  ],
  false, false, REF2_OPTIONS);

// Maybe
// COPERNICUS/S2/20170220T002101_20170220T002059_T55KHB
// COPERNICUS/S2/20170521T002111_20170521T002108_T55KHB
// COPERNICUS/S2/20170809T002111_20170809T002107_T55KHB
// COPERNICUS/S2/20180725T002101_20180725T002055_T55KHB
// COPERNICUS/S2/20180730T002049_20180730T002051_T55KHB
// COPERNICUS/S2/20180809T002049_20180809T002049_T55KHB
// COPERNICUS/S2/20190526T002109_20190526T002103_T55KHB
// COPERNICUS/S2/20190705T002109_20190705T002103_T55KHB
// COPERNICUS/S2/20190903T002059_20190903T002057_T55KHB


// ======== North Lihou Reef (Coral Sea, Australia) =========
// Searched 25 out of 39 images
// 1 Excellent, 2 Good and 3 OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20190905T001111_20190905T001109_T56KLG",
		"COPERNICUS/S2/20170905T000731_20170905T000731_T56KLG",
		"COPERNICUS/S2/20190702T001119_20190702T001117_T56KLG",
		"COPERNICUS/S2/20180113T001101_20180113T001101_T56KLG",
		"COPERNICUS/S2/20180602T001111_20180602T001110_T56KLG",
		"COPERNICUS/S2/20180612T001111_20180612T001108_T56KLG"
  ],
  false, false, REF1_OPTIONS);


// Maybe images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170925T001111_20170925T001105_T56KLG",
		"COPERNICUS/S2/20170930T001059_20170930T001053_T56KLG",
		"COPERNICUS/S2/20180217T001059_20180217T001101_T56KLG",
		"COPERNICUS/S2/20180329T001109_20180329T001104_T56KLG",
		"COPERNICUS/S2/20181005T001109_20181005T001104_T56KLG",
		"COPERNICUS/S2/20181010T001111_20181010T001106_T56KLG",
		"COPERNICUS/S2/20181015T001109_20181015T001105_T56KLG",
		"COPERNICUS/S2/20190617T001111_20190617T001123_T56KLG",
		"COPERNICUS/S2/20190910T001109_20190910T001110_T56KLG",
		"COPERNICUS/S2/20190930T001109_20190930T001109_T56KLG"
  ],
  false, false, REF2_OPTIONS);



// ======== North East Lihou Reef tip (Coral Sea, Australia) =========
// Searched 25 out of 43 images
// 1 Excellent, 2 Good and 1 OK image
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20190905T001111_20190905T001109_T56KMG",	
		"COPERNICUS/S2/20180602T001111_20180602T001110_T56KMG",
		"COPERNICUS/S2/20190702T001119_20190702T001117_T56KMG",
		"COPERNICUS/S2/20180612T001111_20180612T001108_T56KMG"
  ],
  false, false, REF1_OPTIONS);


// Maybe images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20180113T001101_20180113T001101_T56KMG", // Has sunglint
		"COPERNICUS/S2/20180217T001059_20180217T001101_T56KMG", // Has sunglint
		"COPERNICUS/S2/20181005T001109_20181005T001104_T56KMG", // Has sunglint
		"COPERNICUS/S2/20190528T001111_20190528T001112_T56KMG",
		"COPERNICUS/S2/20190910T001109_20190910T001110_T56KMG"
  ],
  false, false, REF2_OPTIONS);



// ======== Flinders, Dart Heralds Surprise (Coral Sea) =========
// Searched 20 out of 66 images
// 1 Excellent, 4 Good images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20180426T002101_20180426T002056_T55KFA",
		"COPERNICUS/S2/20161013T002102_20161013T032259_T55KFA",
		"COPERNICUS/S2/20170824T002059_20170824T002101_T55KFA",
		"COPERNICUS/S2/20180131T002049_20180131T002047_T55KFA",
		"COPERNICUS/S2/20180809T002049_20180809T002049_T55KFA"
  ],
  false, false, REF1_OPTIONS);


// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160804T002112_20160804T002109_T55KFA",
		"COPERNICUS/S2/20160923T002102_20160923T032251_T55KFA",
		"COPERNICUS/S2/20161102T002102_20161102T032425_T55KFA",
		"COPERNICUS/S2/20170720T002111_20170720T002106_T55KFA",
		"COPERNICUS/S2/20171227T002051_20171227T002048_T55KFA",
		"COPERNICUS/S2/20180720T002049_20180720T002052_T55KFA",
		"COPERNICUS/S2/20180730T002049_20180730T002051_T55KFA",
		"COPERNICUS/S2/20180804T002051_20180804T002054_T55KFA",
		"COPERNICUS/S2/20180829T002049_20180829T002045_T55KFA"
  ],
  false, false, REF2_OPTIONS);



// ======== Malay Reef, Magdelaine Cays, Coringa Islet (South), 
//          Abington Reef, U/N Reef (Coral Sea) =========
// Searched 30 out of 81 images
// Excellent images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20180426T002101_20180426T002056_T55KGA",
		"COPERNICUS/S2/20180730T002049_20180730T002051_T55KGA",
		"COPERNICUS/S2/20180829T002049_20180829T002045_T55KGA"
  ],
  false, false, REF1_OPTIONS);


// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160327T001902_20160327T065441_T55KGA",
		"COPERNICUS/S2/20170720T002111_20170720T002106_T55KGA",
		"COPERNICUS/S2/20170824T002059_20170824T002101_T55KGA",
		"COPERNICUS/S2/20180131T002049_20180131T002047_T55KGA",
		"COPERNICUS/S2/20180809T002049_20180809T002049_T55KGA"
  ],
  false, false, REF2_OPTIONS);



// ======== Tregrosse Reefs, Diamond Islet West, Magdelaine Cays, 
//          Coringa Islet (South) (Coral Sea) =========
// Searched 31 out of 74 images
utils.s2_composite_display_and_export(
  [
    // Excellent
    "COPERNICUS/S2/20180426T002101_20180426T002056_T55KHA",
		"COPERNICUS/S2/20180829T002049_20180829T002045_T55KHA",
		// Good
		"COPERNICUS/S2/20160605T002110_20160605T014413_T55KHA",
		"COPERNICUS/S2/20170715T002109_20170715T002105_T55KHA"
  ],
  false, false, REF1_OPTIONS);



utils.s2_composite_display_and_export(
  [
    // OK images
    "COPERNICUS/S2/20170809T002111_20170809T002107_T55KHA",
		"COPERNICUS/S2/20180516T002101_20180516T002057_T55KHA",
		"COPERNICUS/S2/20180730T002049_20180730T002051_T55KHA",
		"COPERNICUS/S2/20180809T002049_20180809T002049_T55KHA",
		"COPERNICUS/S2/20180908T002049_20180908T002045_T55KHA"
  ],
  false, false, REF2_OPTIONS);

// Left Maybe
// COPERNICUS/S2/20160516T002111_20160516T014440_T55KHA
// COPERNICUS/S2/20160903T002102_20160903T002105_T55KHA
// COPERNICUS/S2/20170220T002101_20170220T002059_T55KHA
// COPERNICUS/S2/20170824T002059_20170824T002101_T55KHA
// COPERNICUS/S2/20180421T002059_20180421T002053_T55KHA
// COPERNICUS/S2/20180725T002101_20180725T002055_T55KHA


// ======== Tregrosse Reefs, Diamond Islet (Coral Sea) =========
// Searched 65 out of 125 images
// OK images
utils.s2_composite_display_and_export(
  [
    // 1 Excellent and 4 good right images
		"COPERNICUS/S2/20180811T001111_20180811T001108_T56KKF",
		"COPERNICUS/S2/20170905T000731_20170905T000731_T56KKF",
		"COPERNICUS/S2/20170925T001111_20170925T001105_T56KKF",
		"COPERNICUS/S2/20180831T001111_20180831T001107_T56KKF",
		"COPERNICUS/S2/20190227T001101_20190227T001104_T56KKF",
		// 2 Excellent, 2 good left images
		"COPERNICUS/S2/20180809T002049_20180809T002049_T56KKF",
		"COPERNICUS/S2/20180829T002049_20180829T002045_T56KKF",
		"COPERNICUS/S2/20180913T002051_20180913T002051_T56KKF",
		"COPERNICUS/S2/20160605T002112_20160605T002110_T56KKF"
  ],
  false, false, REF1_OPTIONS);


// Maybe images
utils.s2_composite_display_and_export(
  [
    //OK Right
		"COPERNICUS/S2/20180428T001109_20180428T001107_T56KKF",
		"COPERNICUS/S2/20180612T001111_20180612T001108_T56KKF",
		"COPERNICUS/S2/20180905T001059_20180905T001059_T56KKF",
		"COPERNICUS/S2/20181005T001109_20181005T001104_T56KKF",
		"COPERNICUS/S2/20181114T001109_20181114T001106_T56KKF",
		//OK left
		"COPERNICUS/S2/20180516T002101_20180516T002057_T56KKF",
		"COPERNICUS/S2/20180908T002049_20180908T002045_T56KKF",
		//Maybe left
		"COPERNICUS/S2/20180421T002059_20180421T002053_T56KKF",
		"COPERNICUS/S2/20190401T002101_20190401T002055_T56KKF"
  ],
  false, false, REF2_OPTIONS);

// Maybe right
// COPERNICUS/S2/20171219T001059_20171219T001056_T56KKF
// COPERNICUS/S2/20180113T001101_20180113T001101_T56KKF
// COPERNICUS/S2/20180607T001109_20180607T001106_T56KKF
// COPERNICUS/S2/20180727T001109_20180727T001106_T56KKF
// COPERNICUS/S2/20181010T001111_20181010T001106_T56KKF

// ======== Lihou reef (South West) (Coral Sea, Australia) - Central =========
// AUS00614 - Nautical charts. 
// Searched 36 out of 53 images
utils.s2_composite_display_and_export(
  [
    // Excellent
		"COPERNICUS/S2/20190905T001111_20190905T001109_T56KLF",
		// Good
		"COPERNICUS/S2/20170905T000731_20170905T000731_T56KLF",
		"COPERNICUS/S2/20180217T001059_20180217T001101_T56KLF",
		"COPERNICUS/S2/20180811T001111_20180811T001108_T56KLF",
		"COPERNICUS/S2/20190702T001119_20190702T001117_T56KLF",
		"COPERNICUS/S2/20190811T001119_20190811T001116_T56KLF"
  ],
  false, false, REF1_OPTIONS);

utils.s2_composite_display_and_export(
  [
    // OK
		"COPERNICUS/S2/20170925T001111_20170925T001105_T56KLF",
		"COPERNICUS/S2/20180905T001059_20180905T001059_T56KLF",
		"COPERNICUS/S2/20181005T001109_20181005T001104_T56KLF",
		"COPERNICUS/S2/20181010T001111_20181010T001106_T56KLF",
		"COPERNICUS/S2/20190523T001119_20190523T001117_T56KLF",
		"COPERNICUS/S2/20190612T001119_20190612T001116_T56KLF",
		"COPERNICUS/S2/20190627T001111_20190627T001113_T56KLF",
		"COPERNICUS/S2/20190821T001119_20190821T001114_T56KLF",
		"COPERNICUS/S2/20190930T001109_20190930T001109_T56KLF"
  ],
  false, false, REF2_OPTIONS);

// Maybe
// COPERNICUS/S2/20170930T001059_20170930T001053_T56KLF
// COPERNICUS/S2/20180202T001101_20180202T001104_T56KLF
// COPERNICUS/S2/20180212T001111_20180212T001105_T56KLF
// COPERNICUS/S2/20180612T001111_20180612T001108_T56KLF
// COPERNICUS/S2/20180707T001109_20180707T001107_T56KLF
// COPERNICUS/S2/20180727T001109_20180727T001106_T56KLF
// COPERNICUS/S2/20180806T001109_20180806T001104_T56KLF
// COPERNICUS/S2/20190123T001109_20190123T001109_T56KLF
// COPERNICUS/S2/20190212T001109_20190212T001109_T56KLF




// ======== Lihou reef (West) (Coral Sea, Australia) =========
// Searched 33 out of 45 images
utils.s2_composite_display_and_export(
  [
    // Excellent
		"COPERNICUS/S2/20190905T001111_20190905T001109_T56KMF",
		"COPERNICUS/S2/20200820T001121_20200820T001115_T56KMF",
		// Good
		"COPERNICUS/S2/20170905T000731_20170905T000731_T56KMF",
		"COPERNICUS/S2/20190702T001119_20190702T001117_T56KMF",
		"COPERNICUS/S2/20200731T001121_20200731T001115_T56KMF"
  ],
  false, false, REF1_OPTIONS);


// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20180727T001109_20180727T001106_T56KMF",
		"COPERNICUS/S2/20180806T001109_20180806T001104_T56KMF",
		"COPERNICUS/S2/20180811T001111_20180811T001108_T56KMF",
		"COPERNICUS/S2/20200502T001111_20200502T001112_T56KMF",
		"COPERNICUS/S2/20200815T001109_20200815T001112_T56KMF"
  ],
  false, false, REF2_OPTIONS);

// Maybe
// COPERNICUS/S2/20180707T001109_20180707T001107_T56KMF



// ======== Mellish Reef (Coral Sea) =========
// Mellish Reef lies right on the boundary between two image tiles.
// The original planned tile of 56KQF did not have any good images
// and so the neighbouring 56KRF tile images were used instead.
// The CLOUDY_PIXEL_PERCENTAGE was raised to 10% rather than the usual
// 1%. This still only resulted in 6 images, of which all images were used.
// Searched 6 out of 6 images
// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160107T235158_20160108T011818_T56KRF",
		"COPERNICUS/S2/20160406T234954_20160407T043438_T56KRF",
		"COPERNICUS/S2/20160416T235041_20160417T061750_T56KRF"
  ],
  false, false, REF1_OPTIONS);


// Maybe images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20151128T234812_20170509T143613_T56KRF",
		"COPERNICUS/S2/20151208T234812_20170605T053015_T56KRF",
		"COPERNICUS/S2/20160117T234812_20160117T235108_T56KRF"
  ],
  false, false, REF2_OPTIONS);  




// ======== Marion Reef (Coral Sea, Australia) Northern section ===
// Good images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170905T000731_20170905T000731_T56KME",
		"COPERNICUS/S2/20190811T001119_20190811T001116_T56KME",
		"COPERNICUS/S2/20190905T001111_20190905T001109_T56KME"
  ],
  false, false, REF1_OPTIONS);

// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170925T001111_20170925T001105_T56KME",
		"COPERNICUS/S2/20180212T001111_20180212T001105_T56KME",
		"COPERNICUS/S2/20180806T001109_20180806T001104_T56KME",
		"COPERNICUS/S2/20180915T001059_20180915T001100_T56KME",
		"COPERNICUS/S2/20200716T001109_20200716T001110_T56KME",
		"COPERNICUS/S2/20210701T001109_20210701T001110_T56KME"
  ],
  false, false, REF2_OPTIONS);



// ======== Marion Reef (Coral Sea, Australia) Southern section ===
// Good images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170831T000729_20170831T000725_T56KMD",
		"COPERNICUS/S2/20170925T001111_20170925T001105_T56KMD",
		"COPERNICUS/S2/20190905T001111_20190905T001109_T56KMD"
  ],
  false, false, REF1_OPTIONS);

// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20180212T001111_20180212T001105_T56KMD",
		"COPERNICUS/S2/20180806T001109_20180806T001104_T56KMD",
		"COPERNICUS/S2/20181010T001111_20181010T001106_T56KMD",
		"COPERNICUS/S2/20190920T001109_20190920T001108_T56KMD",
		"COPERNICUS/S2/20200427T001109_20200427T001104_T56KMD"
  ],
  false, false, REF2_OPTIONS);



// ======== Calder Bank, Coral Sea =========
// The CLOUD_PIXEL_PERCENTAGE was increased to 80% to get more images
// Unfortunately on 8 images were available. As a result no second
// reference image was created due to a lack of imagery.
// Searched 8 out of 8 images
// Maybe images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170902T000111_20170902T000107_T56KPC",
    "COPERNICUS/S2/20170907T000119_20170907T000114_T56KPC"
  ],
  false, false, REF1_OPTIONS);



// ======== Saumarez Reefs (North) =========
// Searched 18 out of 18 images
utils.s2_composite_display_and_export(
  [
    // Excellent
		"COPERNICUS/S2/20160927T000212_20160927T000213_T56KNB",
		"COPERNICUS/S2/20160609T000222_20160609T000222_T56KNB",
		// Good
		"COPERNICUS/S2/20160410T000222_20160410T000216_T56KNB",
		"COPERNICUS/S2/20170515T000221_20170515T000221_T56KNB",
		"COPERNICUS/S2/20170729T000219_20170729T000217_T56KNB"
  ],
  false, false, REF1_OPTIONS);


// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20170214T000211_20170214T000212_T56KNB",
		"COPERNICUS/S2/20170415T000221_20170415T000217_T56KNB",
		"COPERNICUS/S2/20170525T000221_20170525T000220_T56KNB",
		"COPERNICUS/S2/20170704T000221_20170704T000217_T56KNB",
		"COPERNICUS/S2/20170823T000221_20170823T000219_T56KNB"
  ],
  false, false, REF2_OPTIONS); 





// ======== Frederick Reef (Coral Sea, Australia) ============
// CLOUD_PIXEL_PERCENTAGE 3%
// 24 of 24 images
// Excellent images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20160609T000222_20160609T000222_T56KPB",
		"COPERNICUS/S2/20160927T000212_20160927T000213_T56KPB",
		"COPERNICUS/S2/20170525T000221_20170525T000220_T56KPB"
  ],
  false, false, REF1_OPTIONS);

// Frederick Reef (Coral Sea, Australia)
// OK images
utils.s2_composite_display_and_export(
  [
    // Good                                              
		"COPERNICUS/S2/20170515T000221_20170515T000221_T56KPB",
		"COPERNICUS/S2/20170729T000219_20170729T000217_T56KPB",
		// OK                                                
		"COPERNICUS/S2/20160410T000216_20160410T012205_T56KPB",
		"COPERNICUS/S2/20160420T000219_20160420T012157_T56KPB"
  ],
  false, false, REF2_OPTIONS);
// Maybe
// COPERNICUS/S2/20160530T000222_20160530T000223_T56KPB
// COPERNICUS/S2/20160709T000221_20160709T012229_T56KPB
// COPERNICUS/S2/20170704T000221_20170704T000217_T56KPB
// COPERNICUS/S2/20170907T000119_20170907T000114_T56KPB
// COPERNICUS/S2/20170818T000219_20170818T000215_T56KPB

//    Low tide                                             
//		"COPERNICUS/S2/20170704T000221_20170704T000217_T56KPB",
//		"COPERNICUS/S2/20170818T000219_20170818T000215_T56KPB",
															 
//		Waves                                                
//		"COPERNICUS/S2/20161106T000222_20161106T000220_T56KPB",
//		"COPERNICUS/S2/20171027T000209_20171027T000204_T56KPB",
//		"COPERNICUS/S2/20171116T000209_20171116T000205_T56KPB",
//		"COPERNICUS/S2/20171206T000209_20171206T000206_T56KPB"




// ======== false, falsen Reefs (Coral Sea) =========
// CLOUD_PIXEL_PERCENTAGE of 100%
// Searched 2 out of 2 images
// OK images
utils.s2_composite_display_and_export(
  [
    "COPERNICUS/S2/20190220T234701_20190220T234701_T56KQB"
  ],
  false, false, REF1_OPTIONS);



// ======== Saumarez Reefs (South) =========
// Searched 25 out of 75 images
utils.s2_composite_display_and_export(
  [
    // Excellent
		"COPERNICUS/S2/20160609T000222_20160609T000222_T56KNA", // High chlorophyll
		"COPERNICUS/S2/20170729T000219_20170729T000217_T56KNA",
		"COPERNICUS/S2/20180818T000241_20180818T000239_T56KNA",
		// Good                                              
		"COPERNICUS/S2/20170515T000221_20170515T000221_T56KNA",
		"COPERNICUS/S2/20170719T000219_20170719T000218_T56KNA",
		"COPERNICUS/S2/20180808T000241_20180808T000240_T56KNA"
  ],
  false, false, REF1_OPTIONS);


utils.s2_composite_display_and_export(
  [
    //OK images
		"COPERNICUS/S2/20160927T000212_20160927T000213_T56KNA",
		"COPERNICUS/S2/20170214T000211_20170214T000212_T56KNA",
		"COPERNICUS/S2/20170415T000221_20170415T000217_T56KNA",
		"COPERNICUS/S2/20170525T000221_20170525T000220_T56KNA",
		"COPERNICUS/S2/20170823T000221_20170823T000219_T56KNA",
		"COPERNICUS/S2/20180714T000239_20180714T000238_T56KNA",
		"COPERNICUS/S2/20180813T000239_20180813T000234_T56KNA"
  ],
  false, false, REF2_OPTIONS); 



// ======== Wreck Reefs (Coral Sea) =========
// Searched 25 out of 41 images
// OK images
utils.s2_composite_display_and_export(
  [
    //Good
		"COPERNICUS/S2/20181003T235241_20181003T235241_T56KQA",
		"COPERNICUS/S2/20181202T235241_20181202T235236_T56KQA",
		// OK                                                
		"COPERNICUS/S2/20180302T235239_20180302T235235_T56KQA",
		"COPERNICUS/S2/20190908T235241_20190908T235244_T56KQA"
  ],
  false, false, REF1_OPTIONS);


utils.s2_composite_display_and_export(
  [
    // OK
		"COPERNICUS/S2/20170421T235251_20170421T235246_T56KQA",
		"COPERNICUS/S2/20170511T235251_20170511T235247_T56KQA",
		"COPERNICUS/S2/20170620T235241_20170620T235244_T56KQA",
		"COPERNICUS/S2/20170923T235229_20170923T235231_T56KQA",
		"COPERNICUS/S2/20171227T235241_20171227T235238_T56KQA",
		"COPERNICUS/S2/20180131T235239_20180131T235238_T56KQA",
		"COPERNICUS/S2/20180205T235241_20180205T235241_T56KQA"
  ],
  false, false, REF2_OPTIONS); 



// ======== Cato Reef (Coral Sea) =========
// Searched 30 out of 67 images
utils.s2_composite_display_and_export(
  [
    // Excellent
		"COPERNICUS/S2/20160923T235242_20160924T011248_T56KQV",
		"COPERNICUS/S2/20170908T235241_20170908T235243_T56KQV",
		"COPERNICUS/S2/20180829T235239_20180829T235235_T56KQV",
		// Good                                              
		"COPERNICUS/S2/20170814T235239_20170814T235242_T56KQV",
		"COPERNICUS/S2/20170903T235239_20170903T235238_T56KQV",
		"COPERNICUS/S2/20180715T235251_20180715T235246_T56KQV"
  ],
  false, false, REF1_OPTIONS);


utils.s2_composite_display_and_export(
  [
    // OK
		"COPERNICUS/S2/20180210T235239_20180210T235237_T56KQV",
		"COPERNICUS/S2/20180521T235239_20180521T235242_T56KQV",
		"COPERNICUS/S2/20180710T235249_20180710T235243_T56KQV",
		"COPERNICUS/S2/20180730T235239_20180730T235241_T56KQV",
		"COPERNICUS/S2/20190426T235249_20190426T235252_T56KQV",
		"COPERNICUS/S2/20190506T235259_20190506T235253_T56KQV"
  ],
  false, false, REF2_OPTIONS); 
  


// ============= BONUS imagery ===============
// This imagery was collected to ensure that no
// reefs were missed. Essentially checking that
// there are no shallow areas on the sea mounts
// We also include imagery of a reef in PNG that is 
// just outside the Coral Sea marine park, but very close
// to Ashmore reef.


// ======== Eastern Fields (PNG) - Far North =========
// Searched 12 out of 12 images
// CLOUD_PIXEL_PERCENTAGE 1%
utils.s2_composite_display_and_export(
  [
// OK
		"COPERNICUS/S2/20180417T003709_20180417T003703_T55LCJ",
		"COPERNICUS/S2/20181213T003659_20181213T003658_T55LCJ",
		"COPERNICUS/S2/20191223T003701_20191223T003659_T55LCJ",
		"COPERNICUS/S2/20200216T003659_20200216T003700_T55LCJ",
		"COPERNICUS/S2/20200913T003709_20200913T003707_T55LCJ"
  ],
  false, false, REF1_OPTIONS);


utils.s2_composite_display_and_export(
  [
    // Maybe
		"COPERNICUS/S2/20170127T003701_20170127T003755_T55LCJ",
		"COPERNICUS/S2/20191203T003701_20191203T003703_T55LCJ",
		"COPERNICUS/S2/20210506T003701_20210506T003703_T55LCJ"
  ],
  false, false, REF2_OPTIONS); 


// ======== Fraser Seamount - South =========
// Searched 20 out of 37 images
// CLOUD_PIXEL_PERCENTAGE 0.3%
utils.s2_composite_display_and_export(
  [
    // Excellent
		"COPERNICUS/S2/20160923T235242_20160923T235240_T56KQU",
		"COPERNICUS/S2/20170908T235241_20170908T235243_T56KQU",
		"COPERNICUS/S2/20180829T235239_20180829T235235_T56KQU",
		"COPERNICUS/S2/20190506T235259_20190506T235253_T56KQU"
  ],
  false, false, REF1_OPTIONS);


utils.s2_composite_display_and_export(
  [
    // Good
		"COPERNICUS/S2/20170829T235251_20170829T235245_T56KQU",
		// OK                                               
		"COPERNICUS/S2/20160406T235242_20160406T235242_T56KQU",
		"COPERNICUS/S2/20170501T235251_20170501T235247_T56KQU",
		"COPERNICUS/S2/20170809T235251_20170809T235246_T56KQU",
		"COPERNICUS/S2/20180521T235239_20180521T235242_T56KQU"
  ],
  false, false, REF2_OPTIONS); 
  
// ======== U/N Sea mount - Central =========
// Searched 6 out of 6 images
utils.s2_composite_display_and_export(
  [
    // Good
		"COPERNICUS/S2/20151128T234812_20170509T143613_T56KQE",
		"COPERNICUS/S2/20160416T235041_20160417T061750_T56KQE"
  ],
  false, false, REF1_OPTIONS);
